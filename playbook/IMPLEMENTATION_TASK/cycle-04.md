# IMPLEMENTATION_TASK（Cycle 4）

## 目的（1〜2日）
- ローカル簡易検索を追加して、日記を探しやすくする
- 既存機能（PWA/ExportImport/Edit/Delete）を壊さない

---

## 今回のスコープ（Must）

### 1) 簡易検索（一覧画面）
- 一覧ページ上部に検索入力を追加
- 検索対象：
  - Entry.body
  - Entry.summary（存在する場合のみ）
- 検索方式：
  - 部分一致（includes）
  - 英字の大小文字は無視（toLowerCaseでOK）
  - 日本語はそのままでOK
- queryが空なら全件表示
- 表示順は既存通り（date降順）

### 2) 最小UX
- 検索結果が0件なら「該当なし」を表示
- 検索中に件数表示（任意、余裕があれば）

---

## 今回やらないこと（厳守）
- 全文検索エンジン導入（転置インデックス等）
- ハイライト
- 検索履歴
- タグ/感情推定/週月要約
- 依存ライブラリ追加
- 大規模リファクタ

---

## 守るべき前提
- 外部通信を追加しない
- オフラインでも動作すること
- Cycle 1〜3 の動作を壊さない

---

## 実装タスク（順番）

1. UI追加（EntryListPage）
- 検索inputを追加（プレースホルダ例：「検索（本文・要約）」）
- queryの状態を保持（useStateでOK）

2. フィルタ実装
- entries（一覧に出す配列）を query で絞り込み
- フィルタ関数は分離してテストしやすくする（小さく）
  - filterEntries(entries, query) のような純関数を推奨

3. 0件表示
- queryが空で0件：既存の「まだ日記がありません」維持
- queryがあり0件：「該当なし」を表示

4. 動作確認
- オフラインでも検索が動く
- 既存の作成/編集/削除/設定/エクスポート/インポートが動く

---

## 変更してよいファイル（例）
- src/ui/pages/EntryListPage.tsx
- src/domain（必要なら検索ユーティリティ）
- src/ui/components（入力コンポーネントが必要なら）

---

## DoD（完了条件）
- [ ] オフラインで検索できる
- [ ] queryが空なら全件に戻る
- [ ] queryありで0件の場合「該当なし」が出る
- [ ] 既存の機能が壊れていない